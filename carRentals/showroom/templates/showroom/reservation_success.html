{% extends "sr_base.html" %}

{% block title %}
{{ car.name }} - Reservation Success
{% endblock %}

{% block content %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

<div class="success_container my-3">
    <div class="success_header">
        <h2>Reservation Confirmation</h2>
    </div>
    <div class="success_reservation-details">
        <p>Your reservation has been confirmed. Below are the details:</p>
        <table>
            <tr>
                <th>Reservation ID</th>
                <td>{{ reservation.reference_number }}</td>
            </tr>
            <tr>
                <th>Car Details</th>
                <td>{{ car.name }} - {{ car.make }}</td>
            </tr>
            <tr>
                <th>Reservation Type</th>
                <td>{{ reservation.reservation_type }}</td>
            </tr>
            <tr>
                <th>Transaction Status</th>
                <td>{{ status }}</td>
            </tr>
            <tr>
                <th>Transaction ID</th>
                <td>{{ transaction_id }}</td>
            </tr>
            <tr>
                <th>Transaction Reference</th>
                <td>{{ tx_ref }}</td>
            </tr>
            <!-- Add more fields as needed -->
        </table>
    </div>
    <div class="success_buttons">
        <button onclick="downloadPDF()" class="btn btn-primary">Download PDF</button>
        <a href="{% url 'profile' %}" class="btn btn-info">Go to Profile</a>
        <a href="{% url 'home' %}" class="btn btn-success">Go Home</a>
    </div>
    <p>Thank you for choosing our service.</p>
</div>

<script>
    function downloadPDF() {
        var doc = new jsPDF();
        doc.text("Reservation ID: {{ reservation.reference_number }}", 10, 10);
        doc.text("Car Details: {{ car.name }} - {{ car.make }}", 10, 20);
        doc.text("Reservation Type: {{ reservation.reservation_type }}", 10, 30);
        doc.text("Transaction Status: {{ status }}", 10, 40);
        doc.text("Transaction ID: {{ transaction_id }}", 10, 50);
        doc.text("Transaction Reference: {{ tx_ref }}", 10, 60);
        doc.save("reservation_details.pdf");
    }
</script>

{% endblock %}
