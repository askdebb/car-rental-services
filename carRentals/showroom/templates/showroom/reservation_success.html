{% extends "sr_base.html" %}

{% block title %}
{{ car.name }} - Reservation Success
{% endblock %}

{% block content %}

{% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script> {% endcomment %}

<div class="success_container my-3">
    <div class="success_header">
        <h2>Reservation Confirmation</h2>
    </div>
    <div class="success_reservation-details">
        <p>Your reservation has been confirmed. Below are the details:</p>
        <table>
            {% comment %} <tr>
                <th>Reservation ID</th>
                <td>{{ reservation.reference_number }}</td>
            </tr>
            <tr>
                <th>Car Details</th>
                <td>{{ car.name }} - {{ car.make }}</td>
            </tr>
            <tr>
                <th>Reservation Type</th>
                <td>{{ reservation.reservation_type }}</td>
            </tr> {% endcomment %}
            <tr>
                <th>Transaction Status</th>
                <td>{{ status }}</td>
            </tr>
            <tr>
                <th>Transaction ID</th>
                <td>{{ transaction_id }}</td>
            </tr>
            <tr>
                <th>Transaction Reference</th>
                <td>{{ tx_ref }}</td>
            </tr>
            <!-- Add more fields as needed -->
        </table>
    </div>
    <div class="success_buttons">
        {% comment %} <button id="downloadPDFButton" class="btn btn-primary">Download PDF</button> {% endcomment %}
        <a href="{% url 'profile' %}" class="btn btn-info">Go to Profile</a>
        <a href="{% url 'home' %}" class="btn btn-success">Go Home</a>
    </div>
    <p class="text-center my-2">Thank you for choosing our service.</p>
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

{% comment %} <script>
    // Function to generate and download PDF
    function downloadPDF() {
        // Check if jsPDF is defined
        if (typeof jsPDF !== "undefined") {
            var doc = new jsPDF();
            var element = document.getElementById('reservationDetails');
            var html = element.innerHTML;
            
            doc.fromHTML(html, 15, 15, {
                'width': 170
            });
            doc.save("reservation_details.pdf");
        } else {
            console.error("jsPDF is not loaded.");
        }
    }

    // Attach click event to the download button
    document.getElementById("downloadPDFButton").addEventListener("click", downloadPDF);
</script> {% endcomment %}
{% comment %} <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script> {% endcomment %}

{% endblock %}
