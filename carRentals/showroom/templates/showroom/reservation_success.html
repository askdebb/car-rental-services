{% extends "sr_base.html" %}

{% block title %}
{{ car.name }} - Reservation Success
{% endblock %}

{% block content %}
<div class="success_container my-3">
    <div class="success_header">
        <h2>Reservation Confirmation</h2>
    </div>
    <div class="success_reservation-details">
        <p>Your reservation has been confirmed. Below are the details:</p>
        <table>
            <tr>
                <th>Reservation ID</th>
                <td>{{ reservation.reference_number }}</td>
            </tr>
            <tr>
                <th>Car Details</th>
                <td>{{ car.name }} - {{ car.make }}</td>
            </tr>
            <tr>
                <th>Reservation Type</th>
                <td>{{ reservation.reservation_type }}</td>
            </tr>
            <tr>
                <th>Transaction Status</th>
                <td>{{ status }}</td>
            </tr>
            <tr>
                <th>Transaction ID</th>
                <td>{{ transaction_id }}</td>
            </tr>
            <tr>
                <th>Transaction Reference</th>
                <td>{{ tx_ref }}</td>
            </tr>
            <!-- Add more fields as needed -->
        </table>
    </div>
    <div class="success_buttons">
        <button onclick="downloadPDF()" class="btn btn-primary">Download as PDF</button>
        <a href="{% url 'profile' %}" class="btn btn-info">Go to Profile</a>
        <a href="{% url 'home' %}" class="btn btn-success">Go Home</a>
    </div>
    <p>Thank you for choosing our service.</p>
</div>

<script>
function downloadPDF() {
    const doc = new jsPDF();
    doc.text(20, 20, "Reservation Confirmation");
    let y = 30;
    doc.text(20, y, "Reservation ID: {{ reservation.reference_number }}");
    y += 10;
    doc.text(20, y, "Car Details: {{ car.name }} - {{ car.make }}");
    y += 10;
    doc.text(20, y, "Reservation Type: {{ reservation.reservation_type }}");
    y += 10;
    doc.text(20, y, "Transaction Status: {{ status }}");
    y += 10;
    doc.text(20, y, "Transaction ID: {{ transaction_id }}");
    y += 10;
    doc.text(20, y, "Transaction Reference: {{ tx_ref }}");

    doc.save("reservation_confirmation.pdf");
}
</script>
{% endblock %}
